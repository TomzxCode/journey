<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A minimalist daily journaling application with activity tracking and import/export capabilities">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Journey">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%232c3e50' width='100' height='100' rx='20'/%3E%3Cpath d='M30 25h40c2.8 0 5 2.2 5 5v40c0 2.8-2.2 5-5 5H30c-2.8 0-5-2.2-5-5V30c0-2.8 2.2-5 5-5zm5 15v25h30V40H35zm5 5h20v2H40v-2zm0 5h20v2H40v-2zm0 5h15v2H40v-2z' fill='white'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%232c3e50' width='100' height='100' rx='20'/%3E%3Cpath d='M30 25h40c2.8 0 5 2.2 5 5v40c0 2.8-2.2 5-5 5H30c-2.8 0-5-2.2-5-5V30c0-2.8 2.2-5 5-5zm5 15v25h30V40H35zm5 5h20v2H40v-2zm0 5h20v2H40v-2zm0 5h15v2H40v-2z' fill='white'/%3E%3C/svg%3E">
    <title>Daily Journal</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <main>
            <div class="file-tabs-container" id="fileTabsContainer" style="display: none;">
                <div class="file-tabs" id="fileTabs"></div>
            </div>

            <section class="entry-section">
                <input type="date" class="date-picker" id="datePicker">
                <textarea id="entryText" placeholder="What's on your mind today?"></textarea>
                <div class="entry-actions">
                    <button id="saveEntry">Save Entry</button>
                    <button id="clearEntry">Clear</button>
                </div>
            </section>

            <section class="past-entries">
                <div class="past-entries-header">
                    <h2>Past Entries</h2>
                    <button class="configure-btn" id="configurePastEntriesBtn" title="Configure Time Periods">‚öôÔ∏è</button>
                    <div class="time-filters">
                        <!-- Filter buttons are dynamically generated by JavaScript -->
                    </div>
                </div>
                <div id="pastEntriesContainer"></div>
            </section>

            <section class="similar-entries">
                <h3>Similar Past Entries</h3>
                <div id="similarEntriesContainer"></div>
            </section>

            <section class="activity-calendar">
                <h2>Journal Activity</h2>
                <div class="year-tabs" id="yearTabs"></div>
                <div class="calendar-container">
                    <div class="calendar-months"></div>
                    <div class="calendar-grid" id="activityCalendar"></div>
                </div>
                <div class="calendar-legend">
                    <span>Less</span>
                    <div class="legend-squares">
                        <div class="legend-square level-0"></div>
                        <div class="legend-square level-1"></div>
                        <div class="legend-square level-2"></div>
                        <div class="legend-square level-3"></div>
                        <div class="legend-square level-4"></div>
                    </div>
                    <span>More</span>
                </div>
            </section>

            <section class="import-export">
                <h2>Import/Export</h2>
                <div class="import-export-actions">
                    <input type="file" id="importFile" accept=".md,.txt" style="display: none;">
                    <button id="importBtn">Import Journal</button>
                    <button id="exportBtn">Export as Markdown</button>
                </div>

                <div class="directory-selection">
                    <h3>Directory Auto-Load</h3>
                    <div class="directory-actions">
                        <button id="selectDirectoryBtn">Select Directory</button>
                        <button id="updateFilesBtn" disabled>Update</button>
                        <button id="clearDirectoryBtn" disabled>Clear Selection</button>
                    </div>
                    <div class="directory-info" id="directoryInfo" style="display: none;">
                        <p><strong>Selected Directory:</strong> <span id="selectedDirectoryPath"></span></p>
                        <div class="file-filters">
                            <label>
                                <input type="checkbox" id="filterMarkdown" checked> Markdown (.md)
                            </label>
                            <label>
                                <input type="checkbox" id="filterText" checked> Text (.txt)
                            </label>
                            <label>
                                <input type="checkbox" id="filterJson"> JSON (.json)
                            </label>
                        </div>
                    </div>
                    <div class="file-list-container" id="fileListContainer" style="display: none;">
                        <div class="file-list-header">
                            <h4>Found Files</h4>
                            <div class="file-selection-controls">
                                <button id="selectAllFilesBtn" class="control-btn">Select All</button>
                                <button id="selectNoneFilesBtn" class="control-btn">Select None</button>
                                <span class="file-count" id="fileCount">0 files found</span>
                            </div>
                        </div>
                        <div class="file-filter-input">
                            <input type="text" id="fileFilterInput" placeholder="Filter files by name or path...">
                        </div>
                        <div class="file-list" id="fileList"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div class="mobile-tab-toggle" id="mobileTabToggle" style="display: none;">üìÇ</div>

    <!-- Configuration Modal -->
    <div class="modal-overlay" id="configModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configure Past Entries</h3>
                <span class="modal-close" id="closeConfigModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="period-list" id="periodList">
                    <!-- Period items will be listed here -->
                </div>
                <div class="add-period-form">
                    <h4>Add New Period</h4>
                    <div class="form-group">
                        <label>Label</label>
                        <input type="text" id="newPeriodLabel" class="form-control" placeholder="e.g., 2 Weeks Ago">
                    </div>
                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label>Value</label>
                            <input type="number" id="newPeriodValue" class="form-control" min="1" value="1">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Unit</label>
                            <select id="newPeriodUnit" class="form-control">
                                <option value="days">Days</option>
                                <option value="weeks">Weeks</option>
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="addPeriodBtn" class="add-btn">Add Period</button>
                        <button id="cancelEditBtn" class="cancel-btn" style="display: none;">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
